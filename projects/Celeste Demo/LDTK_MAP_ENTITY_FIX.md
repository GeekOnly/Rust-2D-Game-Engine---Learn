# üîß ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏õ‡∏±‡∏ç‡∏´‡∏≤: Entity ‡∏´‡∏≤‡∏¢‡πÑ‡∏õ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏Å‡∏î Load Map

## ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô
‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏û‡∏¥‡πà‡∏° LdtkMap component ‡πÉ‡∏´‡πâ‡∏Å‡∏±‡∏ö entity ‡πÅ‡∏•‡∏∞‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "üîÑ Load Map" entity ‡πÄ‡∏î‡∏¥‡∏°‡∏à‡∏∞‡∏´‡∏≤‡∏¢‡πÑ‡∏õ

## ‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏Ç‡∏≠‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤
1. **LdtkLoader ‡∏™‡∏£‡πâ‡∏≤‡∏á Grid entity ‡πÉ‡∏´‡∏°‡πà**: `LdtkLoader::load_project_with_grid_and_colliders()` ‡∏™‡∏£‡πâ‡∏≤‡∏á Grid entity ‡πÉ‡∏´‡∏°‡πà‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÉ‡∏ä‡πâ entity ‡πÄ‡∏î‡∏¥‡∏°
2. **‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏ã‡πâ‡∏≥**: ‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏Å LdtkLoader ‡∏™‡∏≠‡∏á‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÉ‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏î‡∏¥‡∏°
3. **‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏¢‡πâ‡∏≤‡∏¢ children**: Tilemap layers ‡πÅ‡∏•‡∏∞ colliders ‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏õ‡πá‡∏ô children ‡∏Ç‡∏≠‡∏á Grid entity ‡πÉ‡∏´‡∏°‡πà

## ‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç ‚úÖ

### ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡πÉ‡∏ô `engine/src/editor/ui/inspector.rs`:

**‡πÄ‡∏î‡∏¥‡∏° (‡∏õ‡∏±‡∏ç‡∏´‡∏≤):**
```rust
// ‡∏™‡∏£‡πâ‡∏≤‡∏á Grid entity ‡πÉ‡∏´‡∏°‡πà‡πÅ‡∏•‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ entity ‡πÄ‡∏î‡∏¥‡∏°‡∏´‡∏≤‡∏¢‡πÑ‡∏õ
match ecs::loaders::LdtkLoader::load_project_with_grid_and_colliders(...) {
    Ok((grid_entity, _, _)) => {
        // ‡πÉ‡∏ä‡πâ grid_entity ‡πÉ‡∏´‡∏°‡πà‡πÅ‡∏ó‡∏ô entity ‡πÄ‡∏î‡∏¥‡∏°
    }
}
```

**‡πÉ‡∏´‡∏°‡πà (‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏•‡πâ‡∏ß):**
```rust
// ‡πÄ‡∏û‡∏¥‡πà‡∏° Grid component ‡πÉ‡∏´‡πâ entity ‡πÄ‡∏î‡∏¥‡∏°
if !world.grids.contains_key(&entity) {
    let grid = ecs::Grid { ... };
    world.grids.insert(entity, grid);
}

// ‡πÇ‡∏´‡∏•‡∏î LDTK ‡πÅ‡∏•‡∏∞‡∏¢‡πâ‡∏≤‡∏¢ children ‡∏°‡∏≤‡∏ó‡∏µ‡πà entity ‡πÄ‡∏î‡∏¥‡∏°
match ecs::loaders::LdtkLoader::load_project_with_grid_and_colliders(...) {
    Ok((grid_entity, tilemap_entities, collider_entities)) => {
        // ‡∏¢‡πâ‡∏≤‡∏¢ children ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏à‡∏≤‡∏Å grid_entity ‡πÑ‡∏õ‡∏ó‡∏µ‡πà entity ‡πÄ‡∏î‡∏¥‡∏°
        let children: Vec<ecs::Entity> = world.get_children(grid_entity).to_vec();
        for child in children {
            world.set_parent(child, Some(entity));
        }
        
        // ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å Grid component ‡∏à‡∏≤‡∏Å grid_entity ‡πÑ‡∏õ‡∏ó‡∏µ‡πà entity ‡πÄ‡∏î‡∏¥‡∏°
        if let Some(created_grid) = world.grids.get(&grid_entity).cloned() {
            world.grids.insert(entity, created_grid);
        }
        
        // ‡∏•‡∏ö grid_entity ‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß
        world.despawn(grid_entity);
    }
}
```

## ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏´‡∏•‡∏±‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç ‚úÖ

### ‡∏Å‡πà‡∏≠‡∏ô‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç ‚ùå:
1. Entity ‡πÄ‡∏î‡∏¥‡∏° (ID: 123) ‡∏°‡∏µ LdtkMap component
2. ‡∏Å‡∏î Load Map
3. **Entity ‡πÄ‡∏î‡∏¥‡∏°‡∏´‡∏≤‡∏¢‡πÑ‡∏õ!**
4. Grid entity ‡πÉ‡∏´‡∏°‡πà (ID: 456) ‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡∏∂‡πâ‡∏ô
5. Tilemap layers ‡πÄ‡∏õ‡πá‡∏ô children ‡∏Ç‡∏≠‡∏á entity ‡πÉ‡∏´‡∏°‡πà

### ‡∏´‡∏•‡∏±‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç ‚úÖ:
1. Entity ‡πÄ‡∏î‡∏¥‡∏° (ID: 123) ‡∏°‡∏µ LdtkMap component
2. ‡∏Å‡∏î Load Map
3. **Entity ‡πÄ‡∏î‡∏¥‡∏°‡∏¢‡∏±‡∏á‡∏≠‡∏¢‡∏π‡πà!**
4. Grid component ‡∏ñ‡∏π‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏´‡πâ entity ‡πÄ‡∏î‡∏¥‡∏° (ID: 123)
5. Tilemap layers ‡πÄ‡∏õ‡πá‡∏ô children ‡∏Ç‡∏≠‡∏á entity ‡πÄ‡∏î‡∏¥‡∏° (ID: 123)

## ‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö

### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏î‡∏™‡∏≠‡∏ö:
1. ‡∏™‡∏£‡πâ‡∏≤‡∏á entity ‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏ô‡∏â‡∏≤‡∏Å
2. ‡πÄ‡∏û‡∏¥‡πà‡∏° LdtkMap component
3. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ file path ‡πÄ‡∏õ‡πá‡∏ô `levels/simple_level.ldtk`
4. ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "üîÑ Load Map"
5. **‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö**: Entity ‡πÄ‡∏î‡∏¥‡∏°‡∏¢‡∏±‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô hierarchy
6. **‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö**: Entity ‡πÄ‡∏î‡∏¥‡∏°‡∏°‡∏µ Grid component
7. **‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö**: Tilemap layers ‡πÄ‡∏õ‡πá‡∏ô children ‡∏Ç‡∏≠‡∏á entity ‡πÄ‡∏î‡∏¥‡∏°

### ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ó‡∏µ‡πà‡∏Ñ‡∏≤‡∏î‡∏´‡∏ß‡∏±‡∏á:
- ‚úÖ Entity ‡πÄ‡∏î‡∏¥‡∏°‡πÑ‡∏°‡πà‡∏´‡∏≤‡∏¢‡πÑ‡∏õ
- ‚úÖ Grid component ‡∏ñ‡∏π‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏´‡πâ entity ‡πÄ‡∏î‡∏¥‡∏°
- ‚úÖ Tilemap layers ‡πÅ‡∏•‡∏∞ colliders ‡πÄ‡∏õ‡πá‡∏ô children ‡∏Ç‡∏≠‡∏á entity ‡πÄ‡∏î‡∏¥‡∏°
- ‚úÖ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• LDTK ‡∏ñ‡∏π‡∏Å‡πÇ‡∏´‡∏•‡∏î‡πÅ‡∏•‡∏∞‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô LdtkMap component UI
- ‚úÖ Log ‡πÅ‡∏™‡∏î‡∏á: "Successfully loaded LDTK map: ... to entity [ID]"

## ‡∏™‡∏£‡∏∏‡∏õ

‡∏õ‡∏±‡∏ç‡∏´‡∏≤ "Entity ‡∏´‡∏≤‡∏¢‡πÑ‡∏õ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏Å‡∏î Load Map" ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏•‡πâ‡∏ß! ‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ LdtkMap component ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ó‡∏≥‡πÉ‡∏´‡πâ entity ‡πÄ‡∏î‡∏¥‡∏°‡∏´‡∏≤‡∏¢‡πÑ‡∏õ ‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á hierarchy ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Ñ‡∏≤‡∏î‡∏´‡∏ß‡∏±‡∏á

**‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ô‡∏µ‡πâ‡∏ó‡∏≥‡πÉ‡∏´‡πâ:**
- UX ‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô: ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÑ‡∏°‡πà‡∏™‡∏π‡∏ç‡πÄ‡∏™‡∏µ‡∏¢ entity ‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÑ‡∏ß‡πâ
- Hierarchy ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô: Entity ‡πÄ‡∏î‡∏¥‡∏°‡πÄ‡∏õ‡πá‡∏ô parent ‡∏Ç‡∏≠‡∏á tilemap layers
- ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≠‡∏î‡∏Ñ‡∏•‡πâ‡∏≠‡∏á: ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô Unity ‡∏ó‡∏µ‡πà component ‡∏ñ‡∏π‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏´‡πâ entity ‡πÄ‡∏î‡∏¥‡∏°