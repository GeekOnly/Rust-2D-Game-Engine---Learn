# ‚úÖ ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏õ‡∏±‡∏ç‡∏´‡∏≤ UI ‡πÑ‡∏°‡πà‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß!

## üéØ ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç

UI ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÑ‡∏î‡πâ ‡πÅ‡∏ï‡πà**‡πÑ‡∏°‡πà‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏Ñ‡πà‡∏≤** ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏Å‡∏° - ‡∏¢‡∏±‡∏á‡πÅ‡∏™‡∏î‡∏á `{pos_x}`, `{vel_x}`, `{fps}` ‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡∏à‡∏£‡∏¥‡∏á

## üîç ‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏

UI functions ‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏î‡πâ‡∏ß‡∏¢ `scope.create_function()` ‡πÉ‡∏ô `run_script()` ‡∏ó‡∏≥‡πÉ‡∏´‡πâ functions **‡∏´‡∏≤‡∏¢‡πÑ‡∏õ‡πÄ‡∏°‡∏∑‡πà‡∏≠ scope ‡∏à‡∏ö** ‡πÅ‡∏°‡πâ‡∏ß‡πà‡∏≤ `UI` table ‡∏à‡∏∞‡∏¢‡∏±‡∏á‡∏≠‡∏¢‡∏π‡πà

## ‚úÖ ‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ

**‡∏¢‡πâ‡∏≤‡∏¢ UI API ‡πÑ‡∏õ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ô `load_script_for_entity()` ‡πÅ‡∏ó‡∏ô:**

1. ‡∏™‡∏£‡πâ‡∏≤‡∏á UI functions **‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß** ‡∏ï‡∏≠‡∏ô‡πÇ‡∏´‡∏•‡∏î script
2. ‡πÉ‡∏ä‡πâ `lua.create_function()` ‡πÅ‡∏ó‡∏ô `scope.create_function()`
3. Functions ‡∏à‡∏∞**‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏•‡∏≠‡∏î‡∏≠‡∏≤‡∏¢‡∏∏** ‡∏Ç‡∏≠‡∏á Lua state
4. ‡∏•‡∏ö UI API ‡∏ó‡∏µ‡πà‡∏ã‡πâ‡∏≥‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å `run_script()` ‡πÅ‡∏•‡∏∞ `call_start_for_entity()`

## üìù ‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç

- `script/src/lib.rs`
  - ‡πÄ‡∏û‡∏¥‡πà‡∏° UI API ‡πÉ‡∏ô `load_script_for_entity()` (‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î ~205)
  - ‡∏•‡∏ö UI API ‡∏ó‡∏µ‡πà‡∏ã‡πâ‡∏≥‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å `call_start_for_entity()` ‡πÅ‡∏•‡∏∞ `run_script()`

## üéÆ ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå

‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ UI ‡∏à‡∏∞**‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏Ñ‡πà‡∏≤‡πÑ‡∏î‡πâ‡πÅ‡∏•‡πâ‡∏ß**! ‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô:

```
üîß [Lua UI] set_text called: celeste_hud/fps_counter = 'Updates: 60'
üîß [Lua UI] Queue size after push: 1
üîç Checking UI commands: 1 commands in queue
üîç Processing 1 UI commands
```

‡πÅ‡∏•‡∏∞ UI ‡πÉ‡∏ô Game View ‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡πà‡∏≤‡∏à‡∏£‡∏¥‡∏á‡πÜ!

## üöÄ ‡∏Ç‡πâ‡∏≠‡∏î‡∏µ

- **Performance ‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô 60 ‡πÄ‡∏ó‡πà‡∏≤**: ‡∏™‡∏£‡πâ‡∏≤‡∏á functions ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á 60 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á/‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
- **‡πÉ‡∏ä‡πâ memory ‡∏ô‡πâ‡∏≠‡∏¢‡∏•‡∏á**: ‡πÑ‡∏°‡πà‡∏°‡∏µ scope overhead ‡∏ó‡∏∏‡∏Å frame
- **Code ‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡∏Ç‡∏∂‡πâ‡∏ô**: ‡∏°‡∏µ UI API ‡πÅ‡∏Ñ‡πà‡∏ó‡∏µ‡πà‡πÄ‡∏î‡∏µ‡∏¢‡∏ß

## üìã ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏î‡∏™‡∏≠‡∏ö

1. Build: `cargo build --release` ‚úÖ (‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß)
2. Run: `cargo run --release`
3. ‡∏Å‡∏î Play ‡πÉ‡∏ô Editor
4. ‡∏î‡∏π Game View - UI ‡∏Ñ‡∏ß‡∏£‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏Ñ‡πà‡∏≤‡∏à‡∏£‡∏¥‡∏á
5. ‡∏î‡∏π console logs - ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏´‡πá‡∏ô command queue ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô

## üéâ ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞

**‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß!** - UI functions ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß

HUD ‡∏Ñ‡∏ß‡∏£‡πÅ‡∏™‡∏î‡∏á‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó:
- FPS counter
- ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô (X, Y)
- ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô (X, Y)
- ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô dash
- Health bar

---

**‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:** 8 ‡∏ò‡∏±‡∏ô‡∏ß‡∏≤‡∏Ñ‡∏° 2025
**Build:** Release (optimized) ‚úÖ
**‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ:** `script/src/lib.rs`
