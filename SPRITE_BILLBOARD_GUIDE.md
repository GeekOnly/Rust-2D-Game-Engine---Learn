# Sprite Billboard Feature - ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

## ‚úÖ Billboard ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?

Billboard ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡πÉ‡∏ô 3D graphics ‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÉ‡∏´‡πâ sprite ‡∏´‡∏°‡∏∏‡∏ô‡∏ï‡∏≤‡∏°‡∏Å‡∏•‡πâ‡∏≠‡∏á‡πÄ‡∏™‡∏°‡∏≠ ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ö‡∏ß‡πà‡∏≤ sprite "‡∏°‡∏≠‡∏á‡∏´‡∏ô‡πâ‡∏≤" ‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏ï‡∏•‡∏≠‡∏î‡πÄ‡∏ß‡∏•‡∏≤

**‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö:**
- ‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ, ‡∏û‡∏∏‡πà‡∏°‡πÑ‡∏°‡πâ‡πÉ‡∏ô 3D game
- Particle effects (‡∏Ñ‡∏ß‡∏±‡∏ô, ‡πÑ‡∏ü, ‡∏£‡∏∞‡πÄ‡∏ö‡∏¥‡∏î)
- Health bars, damage numbers
- NPCs ‡πÉ‡∏ô 2.5D games
- Sprites ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏°‡∏≠‡∏á‡πÄ‡∏´‡πá‡∏ô‡∏ä‡∏±‡∏î‡πÄ‡∏™‡∏°‡∏≠

## üéØ ‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

### 1. ‡πÄ‡∏õ‡∏¥‡∏î Billboard ‡πÉ‡∏ô Inspector

1. **‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Entity ‡∏ó‡∏µ‡πà‡∏°‡∏µ Sprite component**
   - ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà entity ‡πÉ‡∏ô Hierarchy

2. **‡πÑ‡∏õ‡∏ó‡∏µ‡πà Inspector > Sprite Renderer**
   - ‡∏°‡∏≠‡∏á‡∏´‡∏≤ section "Sprite Renderer" ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô üé®

3. **‡πÄ‡∏õ‡∏¥‡∏î Billboard checkbox**
   ```
   Billboard: ‚òëÔ∏è Always face camera in 3D mode
   ```

4. **‡∏™‡∏•‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô 3D mode**
   - ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏° "3D" ‡πÉ‡∏ô Scene View toolbar

5. **‡∏´‡∏°‡∏∏‡∏ô‡∏Å‡∏•‡πâ‡∏≠‡∏á**
   - ‡πÉ‡∏ä‡πâ Right-click + drag ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏°‡∏∏‡∏ô‡∏Å‡∏•‡πâ‡∏≠‡∏á
   - Sprite ‡∏à‡∏∞‡∏´‡∏°‡∏∏‡∏ô‡∏ï‡∏≤‡∏°‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥!

### 2. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Billboard

**‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏î‡∏™‡∏≠‡∏ö:**
1. ‡∏™‡∏£‡πâ‡∏≤‡∏á sprite entity ‡πÉ‡∏ô scene
2. ‡πÄ‡∏õ‡∏¥‡∏î Billboard checkbox
3. ‡∏™‡∏•‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô 3D mode
4. ‡∏´‡∏°‡∏∏‡∏ô‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏£‡∏≠‡∏ö‡πÜ sprite
5. ‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï‡∏ß‡πà‡∏≤ sprite ‡∏´‡∏°‡∏∏‡∏ô‡∏ï‡∏≤‡∏°‡∏Å‡∏•‡πâ‡∏≠‡∏á‡πÄ‡∏™‡∏°‡∏≠

**‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö:**
- ‚ùå **Billboard OFF**: Sprite ‡∏≠‡∏¢‡∏π‡πà‡∏ô‡∏¥‡πà‡∏á, ‡∏°‡∏≠‡∏á‡πÄ‡∏´‡πá‡∏ô‡∏î‡πâ‡∏≤‡∏ô‡∏Ç‡πâ‡∏≤‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏´‡∏°‡∏∏‡∏ô‡∏Å‡∏•‡πâ‡∏≠‡∏á
- ‚úÖ **Billboard ON**: Sprite ‡∏´‡∏°‡∏∏‡∏ô‡∏ï‡∏≤‡∏°‡∏Å‡∏•‡πâ‡∏≠‡∏á, ‡∏°‡∏≠‡∏á‡πÄ‡∏´‡πá‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏£‡∏á‡πÄ‡∏™‡∏°‡∏≠

## üîß Technical Details

### Sprite Component Structure
```rust
pub struct Sprite {
    pub texture_id: String,
    pub width: f32,
    pub height: f32,
    pub color: [f32; 4],
    pub billboard: bool,  // ‚Üê Billboard flag
    pub flip_x: bool,
    pub flip_y: bool,
    pub sprite_rect: Option<[u32; 4]>,
    pub pixels_per_unit: f32,
}
```

### Billboard Rotation Calculation
```rust
// engine/src/editor/ui/scene_view/rendering/sprite_3d.rs
pub fn calculate_billboard_rotation(&self, sprite_pos: Vec3, camera: &SceneCamera) -> f32 {
    // Calculate vector from sprite to camera
    let to_camera = Vec2::new(
        camera.position.x - sprite_pos.x,
        camera.position.y - sprite_pos.z,
    );
    
    // Calculate angle to face camera
    to_camera.y.atan2(to_camera.x)
}
```

### Rendering Logic
```rust
// In project_sprite_to_screen()
let rotation = if sprite.billboard {
    self.calculate_billboard_rotation(sprite.position, camera)
} else {
    sprite.rotation  // Use world rotation
};
```

## üìä Use Cases

### 1. Trees & Vegetation (‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ‡πÅ‡∏•‡∏∞‡∏û‡∏∑‡∏ä)
```
Billboard: ‚úÖ ON
- ‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ‡∏°‡∏≠‡∏á‡πÄ‡∏´‡πá‡∏ô‡∏ä‡∏±‡∏î‡∏à‡∏≤‡∏Å‡∏ó‡∏∏‡∏Å‡∏°‡∏∏‡∏°
- ‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î polygons ‡∏Å‡∏ß‡πà‡∏≤ 3D models
- ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö forest scenes
```

### 2. Particle Effects (‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå)
```
Billboard: ‚úÖ ON
- ‡∏Ñ‡∏ß‡∏±‡∏ô, ‡πÑ‡∏ü, ‡∏£‡∏∞‡πÄ‡∏ö‡∏¥‡∏î
- ‡∏°‡∏≠‡∏á‡πÄ‡∏´‡πá‡∏ô‡∏ä‡∏±‡∏î‡∏à‡∏≤‡∏Å‡∏ó‡∏∏‡∏Å‡∏°‡∏∏‡∏°
- ‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß‡∏™‡∏°‡∏à‡∏£‡∏¥‡∏á
```

### 3. UI Elements in World Space
```
Billboard: ‚úÖ ON
- Health bars
- Damage numbers
- Quest markers
- Name tags
```

### 4. 2.5D Characters
```
Billboard: ‚úÖ ON (optional)
- NPCs ‡πÉ‡∏ô 2.5D games
- ‡∏°‡∏≠‡∏á‡πÄ‡∏´‡πá‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏£‡∏á‡πÄ‡∏™‡∏°‡∏≠
- ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö isometric games
```

### 5. Static Objects (‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏ô‡∏¥‡πà‡∏á)
```
Billboard: ‚ùå OFF
- Buildings, walls
- Ground tiles
- Static decorations
- ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ perspective ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
```

## üé® Best Practices

### ‚úÖ ‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ Billboard ‡πÄ‡∏°‡∏∑‡πà‡∏≠:
- Sprite ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏°‡∏≠‡∏á‡πÄ‡∏´‡πá‡∏ô‡∏ä‡∏±‡∏î‡∏à‡∏≤‡∏Å‡∏ó‡∏∏‡∏Å‡∏°‡∏∏‡∏°
- ‡πÄ‡∏õ‡πá‡∏ô particle effects ‡∏´‡∏£‡∏∑‡∏≠ visual effects
- ‡πÄ‡∏õ‡πá‡∏ô UI elements ‡πÉ‡∏ô world space
- ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î performance (‡πÅ‡∏ó‡∏ô 3D models)

### ‚ùå ‡πÑ‡∏°‡πà‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ Billboard ‡πÄ‡∏°‡∏∑‡πà‡∏≠:
- ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ perspective ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£, ‡∏Å‡∏≥‡πÅ‡∏û‡∏á)
- Sprite ‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏Ç‡∏≠‡∏á tilemap
- ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ rotation ‡∏ó‡∏µ‡πà‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô
- ‡πÄ‡∏õ‡πá‡∏ô ground/floor sprites

## üêõ Troubleshooting

### Sprite ‡πÑ‡∏°‡πà‡∏´‡∏°‡∏∏‡∏ô‡∏ï‡∏≤‡∏°‡∏Å‡∏•‡πâ‡∏≠‡∏á
1. ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡∏¥‡∏î Billboard checkbox ‡πÅ‡∏•‡πâ‡∏ß
2. ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô 3D mode (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà 2D)
3. ‚úÖ ‡∏•‡∏≠‡∏á‡∏´‡∏°‡∏∏‡∏ô‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏î‡πâ‡∏ß‡∏¢ Right-click + drag
4. ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ sprite ‡∏°‡∏µ Transform component

### Sprite ‡∏´‡∏°‡∏∏‡∏ô‡∏ú‡∏¥‡∏î‡∏ó‡∏¥‡∏®‡∏ó‡∏≤‡∏á
- Billboard ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≤‡∏Å camera position
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ camera position ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
- ‡∏•‡∏≠‡∏á reset camera (‡∏Å‡∏î Home ‡∏´‡∏£‡∏∑‡∏≠ F)

### Billboard ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÉ‡∏ô 2D mode
- Billboard ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÉ‡∏ô 3D mode ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
- ‡πÉ‡∏ô 2D mode ‡∏à‡∏∞‡πÉ‡∏ä‡πâ rotation ‡∏õ‡∏Å‡∏ï‡∏¥

## üìù Example Scene Setup

### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: Forest Scene with Billboard Trees

```
Scene Hierarchy:
‚îú‚îÄ Camera (Main Camera)
‚îú‚îÄ Ground (Tilemap, Billboard OFF)
‚îú‚îÄ Tree_01 (Sprite, Billboard ON)
‚îú‚îÄ Tree_02 (Sprite, Billboard ON)
‚îú‚îÄ Tree_03 (Sprite, Billboard ON)
‚îú‚îÄ Rock (Sprite, Billboard OFF)
‚îî‚îÄ Grass (Sprite, Billboard OFF)
```

**Settings:**
- Trees: Billboard ‚úÖ ON (‡∏´‡∏°‡∏∏‡∏ô‡∏ï‡∏≤‡∏°‡∏Å‡∏•‡πâ‡∏≠‡∏á)
- Ground/Rock/Grass: Billboard ‚ùå OFF (‡∏ô‡∏¥‡πà‡∏á)

## üéØ Performance Notes

**Billboard Performance:**
- ‚úÖ **Very Fast** - ‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì rotation angle
- ‚úÖ **No Extra Draw Calls** - ‡πÉ‡∏ä‡πâ mesh ‡πÄ‡∏î‡∏¥‡∏°
- ‚úÖ **Better than 3D Models** - ‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î polygons

**Comparison:**
- Billboard Sprite: ~2 triangles
- 3D Tree Model: ~500-2000 triangles
- Performance gain: 250x - 1000x faster!

## ‚ú® Advanced Tips

### 1. Combine with Depth Sorting
```
Billboard + Depth Sorting = Perfect 2.5D
- Sprites ‡∏´‡∏°‡∏∏‡∏ô‡∏ï‡∏≤‡∏°‡∏Å‡∏•‡πâ‡∏≠‡∏á
- Render order ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
- ‡∏°‡∏≠‡∏á‡πÄ‡∏´‡πá‡∏ô‡∏ä‡∏±‡∏î‡∏à‡∏≤‡∏Å‡∏ó‡∏∏‡∏Å‡∏°‡∏∏‡∏°
```

### 2. Use with Particle Systems
```
Particle + Billboard = Realistic Effects
- ‡∏Ñ‡∏ß‡∏±‡∏ô, ‡πÑ‡∏ü, ‡∏£‡∏∞‡πÄ‡∏ö‡∏¥‡∏î
- ‡∏°‡∏≠‡∏á‡πÄ‡∏´‡πá‡∏ô‡∏ä‡∏±‡∏î‡∏à‡∏≤‡∏Å‡∏ó‡∏∏‡∏Å‡∏°‡∏∏‡∏°
- ‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß‡∏™‡∏°‡∏à‡∏£‡∏¥‡∏á
```

### 3. Mix Billboard and Non-Billboard
```
Scene = Billboard (trees) + Non-Billboard (ground)
- ‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ‡∏´‡∏°‡∏∏‡∏ô‡∏ï‡∏≤‡∏°‡∏Å‡∏•‡πâ‡∏≠‡∏á
- ‡∏û‡∏∑‡πâ‡∏ô‡∏ô‡∏¥‡πà‡∏á, perspective ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
- ‡∏î‡∏π‡∏™‡∏°‡∏à‡∏£‡∏¥‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î
```

## üìö Related Features

- **Transform Component** - Position, Rotation, Scale
- **Sprite Renderer** - Texture, Color, Flip
- **3D Scene View** - Camera controls, Grid
- **Depth Sorting** - Render order in 3D

## ‚úÖ Status: FULLY FUNCTIONAL

Billboard feature ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡πÄ‡∏ï‡πá‡∏°‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡πÅ‡∏•‡πâ‡∏ß!
- ‚úÖ UI ‡πÉ‡∏ô Inspector
- ‚úÖ Rotation calculation
- ‚úÖ 3D rendering
- ‚úÖ Serialization
- ‚úÖ Performance optimized

---

**‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô!** ‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡πÄ‡∏õ‡∏¥‡∏î Billboard checkbox ‡πÉ‡∏ô Inspector ‡πÅ‡∏•‡πâ‡∏ß‡∏™‡∏•‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô 3D mode üéâ
